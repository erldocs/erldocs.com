<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>erl_scan (stdlib) -  (Erlang Documentation)</title>
    <link href="../erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44246018-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        
  
  <module since="">erl_scan</module>
  <h2 class="modsummary">The Erlang token scanner.</h2>
  <div class="description">
    <p>This module contains functions for tokenizing (scanning) characters into
      Erlang tokens.</p>
  </div>

  <div id="types" class="category"><h4><a href="#types">Types</a></h4><hr/>
    <div class="type">
      <h3 id="type-category">category() = atom()</h3>
    </div>
    <div class="type">
      <h3 id="type-error_description">error_description() = term()</h3>
    </div>
    <div class="type">
      <h3 id="type-error_info">error_info() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a href="erl_anno.html#type-location" class="seealso">erl_anno:location()</a>, module(), <a href="#type-error_description" class="seealso">error_description()</a>}</h3>
    </div>
    <div class="type">
      <h3 id="type-option">option() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return | return_white_spaces | return_comments | text |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{reserved_word_fun, <a href="#type-resword_fun" class="seealso">resword_fun()</a>}</h3>
    </div>
    <div class="type">
      <h3 id="type-options">options() = <a href="#type-option" class="seealso">option()</a> | [<a href="#type-option" class="seealso">option()</a>]</h3>
    </div>
    <div class="type">
      <h3 id="type-symbol">symbol() = atom() | float() | integer() | string()</h3>
    </div>
    <div class="type">
      <h3 id="type-resword_fun">resword_fun() = fun((atom()) -&gt; boolean())</h3>
    </div>
    <div class="type">
      <h3 id="type-token">token() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a href="#type-category" class="seealso">category()</a>, Anno :: <a href="erl_anno.html#type-anno" class="seealso">erl_anno:anno()</a>, <a href="#type-symbol" class="seealso">symbol()</a>} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a href="#type-category" class="seealso">category()</a>, Anno :: <a href="erl_anno.html#type-anno" class="seealso">erl_anno:anno()</a>}</h3>
    </div>
    <div class="type">
      <h3 id="type-tokens">tokens() = [<a href="#type-token" class="seealso">token()</a>]</h3>
    </div>
    <div class="type">
      <h3 id="type-tokens_result">tokens_result() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, Tokens :: <a href="#type-tokens" class="seealso">tokens()</a>, EndLocation :: <a href="erl_anno.html#type-location" class="seealso">erl_anno:location()</a>} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{eof, EndLocation :: <a href="erl_anno.html#type-location" class="seealso">erl_anno:location()</a>} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{error,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorInfo :: <a href="#type-error_info" class="seealso">error_info()</a>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EndLocation :: <a href="erl_anno.html#type-location" class="seealso">erl_anno:location()</a>}</h3>
    </div>
  </div>
 
  <div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr/>
    <div class="function">
      <name name="category" arity="1" since="OTP 18.0"/>
      
      <div class="description">
        <p>Returns the category of <code><anno>Token</anno></code>.</p>
      </div>
    </div>

    <div class="function">
      <name name="column" arity="1" since="OTP 18.0"/>
      
      <div class="description">
        <p>Returns the column of <code><anno>Token</anno></code>'s
          collection of annotations.</p>
      </div>
    </div>

    <div class="function">
      <name name="end_location" arity="1" since="OTP 18.0"/>
      
      <div class="description">
        <p>Returns the end location of the text of
          <code><anno>Token</anno></code>'s collection of annotations. If
            there is no text, <code>undefined</code> is returned.</p>
      </div>
    </div>

    <div class="function">
      <name name="format_error" arity="1" since=""/>
      
      <div class="description">
        <p>Uses an <code><anno>ErrorDescriptor</anno></code> and returns a string 
          that describes the error or warning. This function is usually
          called implicitly when an <code>ErrorInfo</code> structure is
          processed (see section
          <a href="#errorinfo" class="seealso">Error Information</a>).</p>
      </div>
    </div>

    <div class="function">
      <name name="line" arity="1" since="OTP 18.0"/>
      
      <div class="description">
        <p>Returns the line of <code><anno>Token</anno></code>'s collection
          of annotations.</p>
      </div>
    </div>

    <div class="function">
      <name name="location" arity="1" since="OTP 18.0"/>
      
      <div class="description">
        <p>Returns the location of <code><anno>Token</anno></code>'s
          collection of annotations.</p>
      </div>
    </div>

    <div class="function">
      <name name="reserved_word" arity="1" since=""/>
      
      <div class="description">
        <p>Returns <code>true</code> if <code><anno>Atom</anno></code> is an
         Erlang reserved word, otherwise <code>false</code>.</p>
      </div>
    </div>

    <div class="function">
      <name name="string" arity="1" since=""/>
      <name name="string" arity="2" since=""/>
      <name name="string" arity="3" since=""/>
      
      <div class="description">
        <p>Takes the list of characters <code><anno>String</anno></code> and tries to
          scan (tokenize) them. Returns one of the following:</p>
        <taglist>
          <dt><code>{ok, <anno>Tokens</anno>, <anno>EndLocation</anno>}</code></dt>
          <item>
            <p><code><anno>Tokens</anno></code> are the Erlang tokens from
            <code><anno>String</anno></code>. <code><anno>EndLocation</anno></code>
            is the first location after the last token.</p>
          </item>
          <dt><code>{error, <anno>ErrorInfo</anno>,
            <anno>ErrorLocation</anno>}</code></dt>
          <item>
            <p>An error occurred. <code><anno>ErrorLocation</anno></code> is the
              first location after the erroneous token.</p>
          </item>
        </taglist>
        <p><code>string(<anno>String</anno>)</code> is equivalent to
          <code>string(<anno>String</anno>, 1)</code>, and
          <code>string(<anno>String</anno>,
          <anno>StartLocation</anno>)</code> is equivalent to
          <code>string(<anno>String</anno>,
          <anno>StartLocation</anno>, [])</code>.</p>
        <p><code><anno>StartLocation</anno></code> indicates the initial location
          when scanning starts. If <code><anno>StartLocation</anno></code> is a line,
          <code>Anno</code>, <code><anno>EndLocation</anno></code>, and
          <code><anno>ErrorLocation</anno></code> are lines. If
          <code><anno>StartLocation</anno></code> is a pair of a line and a column,
          <code>Anno</code> takes the form of an opaque compound
          data type, and <code><anno>EndLocation</anno></code> and
          <code><anno>ErrorLocation</anno></code>
          are pairs of a line and a column. The <em>token
          annotations</em> contain information about the column and the
          line where the token begins, as well as the text of the
          token (if option <code>text</code> is specified), all of which can
          be accessed by calling
          <a href="#column/1" class="seealso"><code>column/1</code></a>,
          <a href="#line/1" class="seealso"><code>line/1</code></a>,
          <a href="#location/1" class="seealso"><code>location/1</code></a>, and
          <a href="#text/1" class="seealso"><code>text/1</code></a>.</p>
        <p>A <em>token</em> is a tuple containing information about
          syntactic category, the token annotations, and the
          terminal symbol. For punctuation characters (such as <code>;</code> and 
          <code>|</code>) and reserved words, the category and the symbol
          coincide, and the token is represented by a two-tuple.
          Three-tuples have one of the following forms:</p>
        <list type="bulleted">
          <item><code>{atom, Anno, atom()}</code></item>
          <item><code>{char, Anno, char()}</code></item>
          <item><code>{comment, Anno, string()}</code></item>
          <item><code>{float, Anno, float()}</code></item>
          <item><code>{integer, Anno, integer()}</code></item>
          <item><code>{var, Anno, atom()}</code></item>
          <item><code>{white_space, Anno, string()}</code></item>
        </list>
        <p>Valid options:</p>
        <taglist>
          <dt><code>{reserved_word_fun, reserved_word_fun()}</code></dt>
          <item><p>A callback function that is called when the scanner
            has found an unquoted atom. If the function returns
            <code>true</code>, the unquoted atom itself becomes the category
            of the token. If the function returns <code>false</code>,
            <code>atom</code> becomes the category of the unquoted atom.</p>
          </item>
          <dt><code>return_comments</code></dt>
          <item><p>Return comment tokens.</p>
          </item>
          <dt><code>return_white_spaces</code></dt>
          <item><p>Return white space tokens. By convention, a newline
            character, if present, is always the first character of the
            text (there cannot be more than one newline in a white space
            token).</p>
          </item>
          <dt><code>return</code></dt>
          <item><p>Short for <code>[return_comments, return_white_spaces]</code>.</p>
          </item>
          <dt><code>text</code></dt>
          <item><p>Include the token text in the token annotation. The
            text is the part of the input corresponding to the token.</p>
          </item>
        </taglist>
      </div>
    </div>

    <div class="function">
      <name name="symbol" arity="1" since="OTP 18.0"/>
      
      <div class="description">
        <p>Returns the symbol of <code><anno>Token</anno></code>.</p>
      </div>
    </div>

    <div class="function">
      <name name="text" arity="1" since="OTP 18.0"/>
      
      <div class="description">
        <p>Returns the text of <code><anno>Token</anno></code>'s collection
          of annotations. If there is no text, <code>undefined</code> is
          returned.</p>
      </div>
    </div>

    <div class="function">
      <name name="tokens" arity="3" since=""/>
      <name name="tokens" arity="4" since=""/>
      
      <ul class="type"><li><code>char_spec() = string() | eof</code></li></ul>
      <ul class="type"><li><code>return_cont()</code></li></ul>
      <type_desc name="return_cont">An opaque continuation.</type_desc>
      <div class="description">
        <p>This is the re-entrant scanner, which scans characters until
          either a <em>dot</em> ('.' followed by a white space) or
          <code>eof</code> is reached. It returns:</p>
        <taglist>
          <dt><code>{done, <anno>Result</anno>, <anno>LeftOverChars</anno>}</code>
          </dt>
          <item>
            <p>Indicates that there is sufficient input
              data to get a result. <code><anno>Result</anno></code> is:</p>
            <taglist>
              <dt><code>{ok, Tokens, EndLocation}</code></dt>
              <item>
                <p>The scanning was successful. <code>Tokens</code>
                  is the list of tokens including <em>dot</em>.</p>
              </item>
              <dt><code>{eof, EndLocation}</code></dt>
              <item>
                <p>End of file was encountered before any more tokens.</p>
              </item>
              <dt><code>{error, ErrorInfo, EndLocation}</code></dt>
              <item>
                <p>An error occurred. <code><anno>LeftOverChars</anno></code>
                  is the remaining characters of the input data,
                  starting from <code>EndLocation</code>.</p>
              </item>
            </taglist>
          </item>
          <dt><code>{more, <anno>Continuation1</anno>}</code></dt>
          <item>
            <p>More data is required for building a term.
              <code><anno>Continuation1</anno></code> must be passed in a new call to
              <code>tokens/3,4</code> when more data is available.</p>
          </item>
        </taglist>
        <p>The <code><anno>CharSpec</anno></code> <code>eof</code> signals end of file.
        <code><anno>LeftOverChars</anno></code> then takes the value <code>eof</code>
          as well.</p>
        <p><code>tokens(<anno>Continuation</anno>, <anno>CharSpec</anno>,
          <anno>StartLocation</anno>)</code> is equivalent to
          <code>tokens(<anno>Continuation</anno>, <anno>CharSpec</anno>,
          <anno>StartLocation</anno>, [])</code>.</p>
        <p>For a description of the options, see
          <a href="#string/3" class="seealso"><code>string/3</code></a>.</p>
      </div>
    </div>
  </div>

  <div class="section">
    <span id="errorinfo"> </span>
    <h4>Error Information</h4>
    <p><code>ErrorInfo</code> is the standard <code>ErrorInfo</code> structure that is
      returned from all I/O modules. The format is as follows:</p>
    <pre class="sh_erlang">
{ErrorLocation, Module, ErrorDescriptor}</pre>
    <p>A string describing the error is obtained with the following call:</p>
    <pre class="sh_erlang">
Module:format_error(ErrorDescriptor)</pre>
  </div>

  <div class="section">
    <h4>Notes</h4>
    <p>The continuation of the first call to the re-entrant input
      functions must be <code>[]</code>. For a complete description of how the
      re-entrant input scheme works, see Armstrong, Virding and
      Williams: 'Concurrent Programming in Erlang', Chapter 13.</p>
  </div>

  <div class="section">
    <h4>See Also</h4>
    <p><a href="erl_anno.html" class="seealso"><code>erl_anno(3)</code></a>,
      <a href="erl_parse.html" class="seealso"><code>erl_parse(3)</code></a>,
      <a href="io.html" class="seealso"><code>io(3)</code></a></p>
  </div>

      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="../erldocs.js"></script>
  </body>
</html>
