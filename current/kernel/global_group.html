<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>global_group (kernel) -  (Erlang Documentation)</title>
    <link href="../erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44246018-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        
  
  <module since="">global_group</module>
  <h2 class="modsummary">Grouping nodes to global name registration groups.</h2>
  <div class="description">
    <p>This module makes it possible to partition the nodes of a
      system into <em>global groups</em>. Each global group has its own
      global namespace, see <a href="global.html" class="seealso">
      <code>global(3)</code></a>.</p>
    <p>The main advantage of dividing systems into global groups is that
      the background load decreases while the number of nodes to be
      updated is reduced when manipulating globally registered names.</p>
    <p>The Kernel configuration parameter <code>global_groups</code> defines
      the global groups (see also
      <a href="kernel_app.html#global_groups" class="seealso"><code>kernel(6)</code></a>
      and <a href="config.html" class="seealso"><code>config(4)</code></a>):</p>
    <pre class="sh_erlang">
{global_groups, [GroupTuple :: group_tuple()]}</pre>
    <p>For the processes and nodes to run smoothly using the global
      group functionality, the following criteria must be met:</p>
    <list type="bulleted">
      <item>
        <p>An instance of the global group server, <code>global_group</code>,
          must be running on each node. The processes are automatically
          started and synchronized when a node is started.</p>
      </item>
      <item>
        <p>All involved nodes must agree on the global group definition,
          otherwise the behavior of the system is undefined.</p>
      </item>
      <item>
        <p><em>All</em> nodes in the system must belong to exactly
          one global group.</p>
      </item>
    </list>
    <p>In the following descriptions, a <em>group node</em> is a node
      belonging to the same global group as the local node.</p>
  </div>

 <div id="types" class="category"><h4><a href="#types">Types</a></h4><hr/>
    <div class="type">
      <h3 id="type-group_tuple">group_tuple() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{GroupName :: <a href="#type-group_name" class="seealso">group_name()</a>, [node()]} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{GroupName :: <a href="#type-group_name" class="seealso">group_name()</a>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PublishType :: <a href="#type-publish_type" class="seealso">publish_type()</a>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[node()]}</h3>
      <div class="description">
        <p>A <code>GroupTuple</code> without <code>PublishType</code> is the same as a
          <code>GroupTuple</code> with <code>PublishType</code> equal to <code>normal</code>.
	</p>
      </div>
    </div>
    <div class="type">
      <h3 id="type-group_name">group_name() = atom()</h3>
    </div>
    <div class="type">
      <h3 id="type-publish_type">publish_type() = hidden | normal</h3>
      <div class="description">
        <p>A node started with command-line flag <code>-hidden</code> (see
          <a href="../erts/erl.html" class="seealso"><code>erl(1)</code></a>) is said
          to be a <em>hidden</em> node. A hidden node establishes hidden
          connections to nodes not part of the same global group, but
          normal (visible) connections to nodes part of the same global
          group.</p>
        <p>A global group defined with <code>PublishType</code> equal to
	  <code>hidden</code> is said to be a hidden global group.
	  All nodes in a hidden global
          group are hidden nodes, whether they are started with
          command-line flag <code>-hidden</code> or not.</p>
      </div>
    </div>
    <div class="type">
      <h3 id="type-name">name() = atom()</h3>
      <div class="description"><p>A registered name.</p></div>
    </div>

    <div class="type">
      <h3 id="type-where">where() = {node, node()} | {group, <a href="#type-group_name" class="seealso">group_name()</a>}</h3>
    </div>
  </div>

  <div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr/>
    <div class="function">
      <h3 id="global_groups/0">global_groups() -&gt; {GroupName, GroupNames} | undefined</h3>
      <ul class="type_desc"><li><code>GroupName = <a href="#type-group_name" class="seealso">group_name()</a></code></li><li><code>GroupNames = [GroupName]</code></li></ul>
      
      <div class="description">
        <p>Returns a tuple containing the name of the global group that
          the local node belongs to, and the list of all other known
          group names. Returns <code>undefined</code> if no global groups are
          defined.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="info/0">info() -&gt; [<a href="#type-info_item" class="seealso">info_item()</a>]</h3>
      
      <ul class="type"><li><code>info_item() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;{state, State :: <a href="#type-sync_state" class="seealso">sync_state()</a>} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{own_group_name, GroupName :: <a href="#type-group_name" class="seealso">group_name()</a>} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{own_group_nodes, Nodes :: [node()]} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{synched_nodes, Nodes :: [node()]} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{sync_error, Nodes :: [node()]} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{no_contact, Nodes :: [node()]} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{other_groups, Groups :: [<a href="#type-group_tuple" class="seealso">group_tuple()</a>]} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{monitoring, Pids :: [pid()]}</code></li></ul>
      <ul class="type"><li><code>sync_state() = no_conf | synced</code></li></ul>
      <div class="description">
        <p>Returns a list containing information about the global
          groups. Each list element is a tuple. The order of
          the tuples is undefined.</p>
        <taglist>
          <dt><code>{state, <anno>State</anno>}</code></dt>
          <item>
            <p>If the local node is part of a global group,
              <code><anno>State</anno></code> is equal to <code>synced</code>.
              If no global groups are defined,
              <code><anno>State</anno></code> is equal to <code>no_conf</code>.</p>
          </item>
          <dt><code>{own_group_name, <anno>GroupName</anno>}</code></dt>
          <item>
            <p>The name (atom) of the group that the local node belongs
              to.</p>
          </item>
          <dt><code>{own_group_nodes, <anno>Nodes</anno>}</code></dt>
          <item>
            <p>A list of node names (atoms), the group nodes.</p>
          </item>
          <dt><code>{synced_nodes, <anno>Nodes</anno>}</code></dt>
          <item>
            <p>A list of node names, the group nodes currently
              synchronized with the local node.</p>
          </item>
          <dt><code>{sync_error, <anno>Nodes</anno>}</code></dt>
          <item>
            <p>A list of node names, the group nodes with which
              the local node has failed to synchronize.</p>
          </item>
          <dt><code>{no_contact, <anno>Nodes</anno>}</code></dt>
          <item>
            <p>A list of node names, the group nodes to which there are
              currently no connections.</p>
          </item>
          <dt><code>{other_groups, <anno>Groups</anno>}</code></dt>
          <item>
            <p><code><anno>Groups</anno></code> is a list of tuples
              <code>{<anno>GroupName</anno>, <anno>Nodes</anno>}</code>,
              specifying the name and nodes
              of the other global groups.</p>
          </item>
          <dt><code>{monitoring, <anno>Pids</anno>}</code></dt>
          <item>
            <p>A list of pids, specifying the processes that have
              subscribed to <code>nodeup</code> and <code>nodedown</code> messages.</p>
          </item>
        </taglist>
      </div>
    </div>

    <div class="function">
      <h3 id="monitor_nodes/1">monitor_nodes(Flag) -&gt; ok</h3>
      <ul class="type_desc"><li><code>Flag = boolean()</code></li></ul>
      
      <div class="description">
        <p>Depending on <code><anno>Flag</anno></code>, the calling process
          starts subscribing (<code><anno>Flag</anno></code> equal to
          <code>true</code>) or stops subscribing (<code><anno>Flag</anno></code>
          equal to <code>false</code>) to node status change messages.</p>
        <p>A process that has subscribed receives the messages
          <code>{nodeup, Node}</code> and <code>{nodedown, Node}</code> when a
          group node connects or disconnects, respectively.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="own_nodes/0">own_nodes() -&gt; Nodes</h3>
      <ul class="type_desc"><li><code>Nodes = [Node :: node()]</code></li></ul>
      
      <div class="description">
        <p>Returns the names of all group nodes, regardless of their
          current status.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="registered_names/1">registered_names(Where) -&gt; Names</h3>
      <ul class="type_desc"><li><code>Where = <a href="#type-where" class="seealso">where()</a></code></li><li><code>Names = [Name :: <a href="#type-name" class="seealso">name()</a>]</code></li></ul>
      
      <div class="description">
        <p>Returns a list of all names that are globally registered
          on the specified node or in the specified global group.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="send/2">send(Name, Msg) -&gt; pid() | {badarg, {Name, Msg}}</h3>
      <ul class="type_desc"><li><code>Name = <a href="#type-name" class="seealso">name()</a></code></li><li><code>Msg = term()</code></li></ul>
      <h3 id="send/3">send(Where, Name, Msg) -&gt; pid() | {badarg, {Name, Msg}}</h3>
      <ul class="type_desc"><li><code>Where = <a href="#type-where" class="seealso">where()</a></code></li><li><code>Name = <a href="#type-name" class="seealso">name()</a></code></li><li><code>Msg = term()</code></li></ul>
      
      <div class="description">
        <p>Searches for <code><anno>Name</anno></code>, globally registered on
          the specified node or in the specified global group, or
          (if argument <code><anno>Where</anno></code> is not provided) in any
          global group. The global groups are searched in the order that
          they appear in the value of configuration parameter
          <code>global_groups</code>.</p>
        <p>If <code><anno>Name</anno></code> is found, message
          <code><anno>Msg</anno></code> is sent to
          the corresponding pid. The pid is also the return value of
          the function. If the name is not found, the function returns
          <code>{badarg, {<anno>Name</anno>, <anno>Msg</anno>}}</code>.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="sync/0">sync() -&gt; ok</h3>
      
      <div class="description">
        <p>Synchronizes the group nodes, that is, the global name
          servers on the group nodes. Also checks the names globally
          registered in the current global group and unregisters them
          on any known node not part of the group.</p>
        <p>If synchronization is not possible, an error report is sent
          to the error logger (see also
          <a href="error_logger.html" class="seealso"><code>error_logger(3)</code></a>.
        </p>
        <p>Returns <code>{error, {'invalid global_groups definition', Bad}}</code>
          if configuration parameter <code>global_groups</code> has an
          invalid value <code>Bad</code>.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="whereis_name/1">whereis_name(Name) -&gt; pid() | undefined</h3>
      <ul class="type_desc"><li><code>Name = <a href="#type-name" class="seealso">name()</a></code></li></ul>
      <h3 id="whereis_name/2">whereis_name(Where, Name) -&gt; pid() | undefined</h3>
      <ul class="type_desc"><li><code>Where = <a href="#type-where" class="seealso">where()</a></code></li><li><code>Name = <a href="#type-name" class="seealso">name()</a></code></li></ul>
      
      <div class="description">
        <p>Searches for <code><anno>Name</anno></code>, globally registered on
          the specified node or in the specified global group, or
          (if argument <code><anno>Where</anno></code> is not provided) in any global
          group. The global groups are searched in the order that
          they appear in the value of configuration parameter
          <code>global_groups</code>.</p>
        <p>If <code><anno>Name</anno></code> is found, the corresponding pid is
          returned. If the name is not found, the function returns
          <code>undefined</code>.</p>
      </div>
    </div>
  </div>

  <div class="section">
    <h4>Notes</h4>
    <list type="bulleted">
      <item><p>In the situation where a node has lost its connections to other
        nodes in its global group, but has connections to nodes in other
        global groups, a request from another global group can produce an
        incorrect or misleading result. For example, the isolated node can
        have inaccurate information about registered names in its
        global group.</p></item>
     <item><p>Function
       <a href="#send/2" class="seealso"><code>send/2,3</code></a>
       is not secure.</p></item>
     <item><p>Distribution of applications is highly dependent of the global
        group definitions. It is not recommended that an application is
        distributed over many global groups, as
        the registered names can be moved to another global group at
        failover/takeover. Nothing prevents this to be done, but
        the application code must then handle the situation.</p></item>
    </list>
  </div>

  <div class="section">
    <h4>See Also</h4>
    <p><a href="global.html" class="seealso"><code>global(3)</code></a>,
      <a href="../erts/erl.html" class="seealso"><code>erl(1)</code></a></p>
  </div>

      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="../erldocs.js"></script>
  </body>
</html>
