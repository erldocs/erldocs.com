<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>ssh_sftp (ssh) -  (Erlang Documentation)</title>
    <link href="../erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44246018-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        
  
  <module since="">ssh_sftp</module>
  <h2 class="modsummary">SFTP client.</h2>
  <div class="description">
    <p>This module implements an SSH FTP (SFTP) client. SFTP is a
    secure, encrypted file transfer service available for
    SSH.</p>
  </div>
  
  <div id="types" class="category"><h4><a href="#types">Types</a></h4><hr/>
    <div class="type">
      <h3 id="type-sftp_option">sftp_option() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{timeout, timeout()} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sftp_vsn, integer() &gt;= 1} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{window_size, integer() &gt;= 1} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{packet_size, integer() &gt;= 1}</h3>
      <div class="description">
      </div>
    </div>

    <datatype_title>Error cause</datatype_title>
    <div class="type">
      <h3 id="type-reason">reason() = atom() | string() | tuple()</h3>
      <div class="description">
	<p>A description of the reason why an operation failed.</p>
	<p>The <code>atom()</code> value is formed from the sftp error codes in the protocol-level responses as defined in 
	<url href="https://tools.ietf.org/html/draft-ietf-secsh-filexfer-13#page-49">draft-ietf-secsh-filexfer-13</url>
	section 9.1.
	  The codes are named as <code>SSH_FX_*</code> which are transformed into lowercase of the star-part.
	  E.g. the error code <code>SSH_FX_NO_SUCH_FILE</code>
	  will cause the <code>reason()</code> to be <code>no_such_file</code>.
	</p>
	<p>The <code>string()</code> reason is the error information from the server in case of an exit-signal.  If that information is empty, the reason is the exit signal name.
	</p>
	<p>The <code>tuple()</code> reason are other errors like for example <code>{exit_status,1}</code>.
	</p>
      </div>
    </div>

    <datatype_title>Crypto operations for open_tar</datatype_title>
    <div class="type">
      <h3 id="type-tar_crypto_spec">tar_crypto_spec() = <a href="#type-encrypt_spec" class="seealso">encrypt_spec()</a> | <a href="#type-decrypt_spec" class="seealso">decrypt_spec()</a></h3>
      <h3 id="type-encrypt_spec">encrypt_spec() = {<a href="#type-init_fun" class="seealso">init_fun()</a>, <a href="#type-crypto_fun" class="seealso">crypto_fun()</a>, <a href="#type-final_fun" class="seealso">final_fun()</a>}</h3>
      <h3 id="type-decrypt_spec">decrypt_spec() = {<a href="#type-init_fun" class="seealso">init_fun()</a>, <a href="#type-crypto_fun" class="seealso">crypto_fun()</a>}</h3>
      <div class="description">
	<p>Specifies the encryption or decryption applied to tar files when using
	<a href="#open_tar/3" class="seealso">open_tar/3</a> or 
	<a href="#open_tar/4" class="seealso">open_tar/4</a>.
	</p>
	<p>The encryption or decryption is applied to the generated stream of
	bytes prior to sending the resulting stream to the SFTP server.
	</p>
	<p>For code examples see Section
	<a href="using_ssh.html#example-with-encryption" class="seealso">Example with encryption</a>
	in the ssh Users Guide.
	</p>
      </div>
    </div>

    <div class="type">
      <h3 id="type-init_fun">init_fun() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun(() -&gt; {ok, <a href="#type-crypto_state" class="seealso">crypto_state()</a>}) |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun(() -&gt; {ok, <a href="#type-crypto_state" class="seealso">crypto_state()</a>, <a href="#type-chunk_size" class="seealso">chunk_size()</a>})</h3>
      <h3 id="type-chunk_size">chunk_size() = undefined | integer() &gt;= 1</h3>
      <h3 id="type-crypto_state">crypto_state() = any()</h3>
      <div class="description">
	<p>The <code>init_fun()</code> in the
	<a href="#type-tar_crypto_spec" class="seealso">tar_crypto_spec</a>
	is applied once prior to any other <code>crypto</code>
	operation. The intention is that this function initiates the encryption or
	decryption for example by calling
	<a href="../crypto/crypto.html#crypto_init/4" class="seealso">crypto:crypto_init/4</a>
	or similar. The <code>crypto_state()</code> is the state such a function may return.
	</p>
	<p>If the selected cipher needs to have the input data partioned into
	blocks of a certain size, the <code>init_fun()</code> should return the second
	form of return value with the <code>chunk_size()</code> set to the block size.
	If the <code>chunk_size()</code> is <code>undefined</code>, the size of the <code>PlainBin</code>s varies,
	because this is	intended for stream crypto, whereas a fixed <code>chunk_size()</code> is intended for block crypto.
	A <code>chunk_size()</code> can be changed in the return from the <code>crypto_fun()</code>.
	The value can be changed between <code>pos_integer()</code> and <code>undefined</code>.
	</p>
      </div>
    </div>

    <div class="type">
      <h3 id="type-crypto_fun">crypto_fun() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun((TextIn :: binary(), <a href="#type-crypto_state" class="seealso">crypto_state()</a>) -&gt; <a href="#type-crypto_result" class="seealso">crypto_result()</a>)</h3>
      <h3 id="type-crypto_result">crypto_result() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, TextOut :: binary(), <a href="#type-crypto_state" class="seealso">crypto_state()</a>} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, TextOut :: binary(), <a href="#type-crypto_state" class="seealso">crypto_state()</a>, <a href="#type-chunk_size" class="seealso">chunk_size()</a>}</h3>
      <div class="description">
	<p>The initial <code>crypto_state()</code> returned from the
	<a href="#type-init_fun" class="seealso">init_fun()</a>
	is folded into repeated applications of the <code>crypto_fun()</code> in the
	<a href="#type-tar_crypto_spec" class="seealso">tar_crypto_spec</a>.
	The binary returned from that fun is sent to the remote SFTP server and
	the new <code>crypto_state()</code> is used in the next call of the
	<code>crypto_fun()</code>.
	</p>
	<p>If the <code>crypto_fun()</code> reurns a <code>chunk_size()</code>, that value
	is as block size for further blocks in calls to <code>crypto_fun()</code>.
	</p>
      </div>
    </div>

    <div class="type">
      <h3 id="type-final_fun">final_fun() = <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun((FinalTextIn :: binary(), <a href="#type-crypto_state" class="seealso">crypto_state()</a>) -&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, FinalTextOut :: binary()})</h3>
      <div class="description">
	<p>If doing encryption,
	the <code>final_fun()</code>  in the
	<a href="#type-tar_crypto_spec" class="seealso">tar_crypto_spec</a>
	is applied to the last piece of data.
	The <code>final_fun()</code> is responsible for padding (if needed) and
	encryption of that last piece.
	</p>
      </div>
    </div>
  </div>

  <div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr/>
     <div class="function">
       <h3 id="apread/4">apread(ChannelPid, Handle, Position, Len) -&gt; {async, N} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Position = Len = integer()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li><li><code>N = term()</code></li></ul>
       
       <div class="description"><p>The <code>apread/4</code> function reads from a specified position,
       combining the <a href="#position/3" class="seealso"><code>position/3</code></a> and 
       <a href="#aread/3" class="seealso"><code>aread/3</code></a> functions.</p>
       </div>
     </div>
     
     <div class="function">
	<h3 id="apwrite/4">apwrite(ChannelPid, Handle, Position, Data) -&gt; {async, N} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Position = integer()</code></li><li><code>Data = binary()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li><li><code>N = term()</code></li></ul>
	
       <div class="description"><p>The <code>apwrite/4</code> function writes to a specified position,
       combining the <a href="#position/3" class="seealso"><code>position/3</code></a> and 
       <a href="#awrite/3" class="seealso"><code>awrite/3</code></a> functions.</p>
       </div>
      </div>
      
      <div class="function">
	<h3 id="aread/3">aread(ChannelPid, Handle, Len) -&gt; {async, N} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Len = integer()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li><li><code>N = term()</code></li></ul>
	
	<div class="description">
	  <p>Reads from an open file, without waiting for the result. If the
          handle is valid, the function returns <code>{async, N}</code>, where <code>N</code>
          is a term guaranteed to be unique between calls of <code>aread</code>.
          The actual data is sent as a message to the calling process. This
          message has the form <code>{async_reply, N, Result}</code>, where
          <code>Result</code> is the result from the read, either <code>{ok, Data}</code>,
          <code>eof</code>, or <code>{error, reason()}</code>.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="awrite/3">awrite(ChannelPid, Handle, Data) -&gt; {async, N} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Data = binary()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li><li><code>N = term()</code></li></ul>
      
      <div class="description">
        <p>Writes to an open file, without waiting for the result. If the
          handle is valid, the function returns <code>{async, N}</code>, where <code>N</code>
          is a term guaranteed to be unique between calls of
          <code>awrite</code>. The result of the <code>write</code> operation is sent
          as a message to the calling process. This message has the form
          <code>{async_reply, N, Result}</code>, where <code>Result</code> is the result
          from the write, either <code>ok</code>, or <code>{error, reason()}</code>.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="close/2">close(ChannelPid, Handle) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="close/3">close(ChannelPid, Handle, Timeout) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Timeout = timeout()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Closes a handle to an open file or directory on the server.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="delete/2">delete(ChannelPid, Name) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="delete/3">delete(ChannelPid, Name, Timeout) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Timeout = timeout()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Deletes the file specified by <code>Name</code>.
	</p>
      </div>
    </div>

    <div class="function">
      <h3 id="del_dir/2">del_dir(ChannelPid, Name) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="del_dir/3">del_dir(ChannelPid, Name, Timeout) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Timeout = timeout()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
	<p>Deletes a directory specified by <code>Name</code>.
	The directory must be empty before it can be successfully deleted.
	</p>
      </div>
    </div>

     <div class="function">
      <h3 id="list_dir/2">list_dir(ChannelPid, Path) -&gt; {ok, FileNames} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Path = string()</code></li><li><code>FileNames = [FileName]</code></li><li><code>FileName = string()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="list_dir/3">list_dir(ChannelPid, Path, Timeout) -&gt; {ok, FileNames} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Path = string()</code></li><li><code>Timeout = timeout()</code></li><li><code>FileNames = [FileName]</code></li><li><code>FileName = string()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Lists the given directory on the server, returning the
          filenames as a list of strings.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="make_dir/2">make_dir(ChannelPid, Name) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="make_dir/3">make_dir(ChannelPid, Name, Timeout) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Timeout = timeout()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Creates a directory specified by <code>Name</code>. <code>Name</code>
          must be a full path to a new directory. The directory can only be
	created in an existing directory.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="make_symlink/3">make_symlink(ChannelPid, Name, Target) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = Target = string()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="make_symlink/4">make_symlink(ChannelPid, Name, Target, Timeout) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = Target = string()</code></li><li><code>Timeout = timeout()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Creates a symbolic link pointing to <code>Target</code> with the
          name <code>Name</code>.
	</p>
      </div>
    </div>

    <div class="function">
      <h3 id="open/3">open(ChannelPid, Name, Mode) -&gt; {ok, Handle} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Mode = [read | write | append | binary | raw]</code></li><li><code>Handle = term()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="open/4">open(ChannelPid, Name, Mode, Timeout) -&gt; {ok, Handle} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Mode = [read | write | append | binary | raw]</code></li><li><code>Timeout = timeout()</code></li><li><code>Handle = term()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Opens a file on the server and returns a handle, which
          can be used for reading or writing.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="opendir/2">opendir(ChannelPid, Path) -&gt; {ok, Handle} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Path = string()</code></li><li><code>Handle = term()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="opendir/3">opendir(ChannelPid, Path, Timeout) -&gt; {ok, Handle} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Path = string()</code></li><li><code>Timeout = timeout()</code></li><li><code>Handle = term()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Opens a handle to a directory on the server. The handle
          can be used for reading directory contents.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="open_tar/3">open_tar(ChannelPid, Path, Mode) -&gt; {ok, Handle} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Path = string()</code></li><li><code>Mode = [read | write | {crypto, <a href="#type-tar_crypto_spec" class="seealso">tar_crypto_spec()</a>}]</code></li><li><code>Handle = term()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="open_tar/4">open_tar(ChannelPid, Path, Mode, Timeout) -&gt; {ok, Handle} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Path = string()</code></li><li><code>Mode = [read | write | {crypto, <a href="#type-tar_crypto_spec" class="seealso">tar_crypto_spec()</a>}]</code></li><li><code>Timeout = timeout()</code></li><li><code>Handle = term()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Opens a handle to a tar file on the server, associated with <code>ChannelPid</code>.
	The handle can be used for remote tar creation and extraction. The actual writing
	and reading is performed by calls to 
	<a href="../stdlib/erl_tar.html#add/3" class="seealso">erl_tar:add/3,4</a> and
	<a href="../stdlib/erl_tar.html#extract/2" class="seealso">erl_tar:extract/2</a>.
	Note: The 
	<a href="../stdlib/erl_tar.html#init/3" class="seealso">erl_tar:init/3</a> function should not
	be called, that one is called by this open_tar function.
	</p>
	<p>For code examples see Section
	<a href="using_ssh.html#sftp-client-with-tar-compression" class="seealso">SFTP Client with TAR Compression</a>
	in the ssh Users Guide.
	</p>
	<p>The <code>crypto</code> mode option is explained in the data types section above, see
	<a href="#Crypto operations for open_tar" class="seealso">Crypto operations for open_tar</a>.
	Encryption is assumed if the <code>Mode</code> contains <code>write</code>, and
	decryption if the <code>Mode</code> contains <code>read</code>.
	</p>
      </div>
    </div>

    <div class="function">
      <h3 id="position/3">position(ChannelPid, Handle, Location) -&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, NewPosition} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Location = <br>
&nbsp;&nbsp;&nbsp;&nbsp;Offset |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{bof, Offset} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{cur, Offset} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{eof, Offset} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;bof | cur | eof</code></li><li><code>Offset = NewPosition = integer()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="position/4">position(ChannelPid, Handle, Location, Timeout) -&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, NewPosition} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Location = <br>
&nbsp;&nbsp;&nbsp;&nbsp;Offset |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{bof, Offset} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{cur, Offset} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;{eof, Offset} |<br>
&nbsp;&nbsp;&nbsp;&nbsp;bof | cur | eof</code></li><li><code>Timeout = timeout()</code></li><li><code>Offset = NewPosition = integer()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Sets the file position of the file referenced by <code>Handle</code>.
          Returns <code>{ok, NewPosition}</code> (as an absolute offset) if
          successful, otherwise <code>{error, reason()}</code>. <code>Location</code> is
          one of the following:</p>
        <taglist>
          <dt><code>Offset</code></dt>
          <item>
            <p>The same as <code>{bof, Offset}</code>.</p>
          </item>
          <dt><code>{bof, Offset}</code></dt>
          <item>
            <p>Absolute offset.</p>
          </item>
          <dt><code>{cur, Offset}</code></dt>
          <item>
            <p>Offset from the current position.</p>
          </item>
          <dt><code>{eof, Offset}</code></dt>
          <item>
            <p>Offset from the end of file.</p>
          </item>
          <dt><code>bof | cur | eof</code></dt>
          <item>
            <p>The same as eariler with <code>Offset</code> 0,
	    that is, <code>{bof, 0} | {cur, 0} | {eof, 0}</code>.
	    </p>
          </item>
        </taglist>
      </div>
    </div>

    <div class="function">
      <h3 id="pread/4">pread(ChannelPid, Handle, Position, Len) -&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, Data} | eof | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Position = Len = integer()</code></li><li><code>Data = string() | binary()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="pread/5">pread(ChannelPid, Handle, Position, Len, Timeout) -&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, Data} | eof | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Position = Len = integer()</code></li><li><code>Timeout = timeout()</code></li><li><code>Data = string() | binary()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
       <div class="description"><p>The <code>pread/3,4</code> function reads from a specified position,
       combining the <a href="#position/3" class="seealso"><code>position/3</code></a> and 
       <a href="#read/3" class="seealso"><code>read/3,4</code></a> functions.</p>
       </div>
     </div>

    <div class="function">
      <h3 id="pwrite/4">pwrite(ChannelPid, Handle, Position, Data) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Position = integer()</code></li><li><code>Data = iolist()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="pwrite/5">pwrite(ChannelPid, Handle, Position, Data, Timeout) -&gt; ok | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Position = integer()</code></li><li><code>Data = iolist()</code></li><li><code>Timeout = timeout()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
       <div class="description"><p>The <code>pwrite/3,4</code> function writes to a specified position,
       combining the <a href="#position/3" class="seealso"><code>position/3</code></a> and 
       <a href="#write/3" class="seealso"><code>write/3,4</code></a> functions.</p>
       </div>
    </div>

    <div class="function">
      <h3 id="read/3">read(ChannelPid, Handle, Len) -&gt; {ok, Data} | eof | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Len = integer()</code></li><li><code>Data = string() | binary()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="read/4">read(ChannelPid, Handle, Len, Timeout) -&gt; {ok, Data} | eof | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Handle = term()</code></li><li><code>Len = integer()</code></li><li><code>Timeout = timeout()</code></li><li><code>Data = string() | binary()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Reads <code>Len</code> bytes from the file referenced by
          <code>Handle</code>. Returns <code>{ok, Data}</code>, <code>eof</code>, or
          <code>{error, reason()}</code>. If the file is opened with <code>binary</code>,
          <code>Data</code> is a binary, otherwise it is a string.</p>
        <p>If the file is read past <code>eof</code>, only the remaining bytes
          are read and returned. If no bytes are read, <code>eof</code>
          is returned.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="read_file/2">read_file(ChannelPid, File) -&gt; {ok, Data} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>File = string()</code></li><li><code>Data = binary()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="read_file/3">read_file(ChannelPid, File, Timeout) -&gt; {ok, Data} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>File = string()</code></li><li><code>Data = binary()</code></li><li><code>Timeout = timeout()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Reads a file from the server, and returns the data in a binary.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="read_file_info/2">read_file_info(ChannelPid, Name) -&gt; {ok, FileInfo} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>FileInfo = <a href="file.html#type-file_info" class="seealso">file:file_info()</a></code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="read_file_info/3">read_file_info(ChannelPid, Name, Timeout) -&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ok, FileInfo} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = string()</code></li><li><code>Timeout = timeout()</code></li><li><code>FileInfo = <a href="file.html#type-file_info" class="seealso">file:file_info()</a></code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Returns a <code>file_info</code> record from the file system object specified by
          <code>Name</code> or <code>Handle</code>. See
	<a href="../kernel/file.html#read_file_info/2" class="seealso">file:read_file_info/2</a>
	for information about the record.
	</p>
	<p>
	  Depending on the underlying OS:es links might be followed and info on the final file, directory
	  etc is returned. See <a href="#read_link_info/2" class="seealso">read_link_info/2</a>
	  on how to get information on links instead.
	</p>
      </div>
    </div>

     <div class="function">
      <h3 id="read_link/2">read_link(ChannelPid, Name) -&gt; {ok, Target} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = Target = string()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      <h3 id="read_link/3">read_link(ChannelPid, Name, Timeout) -&gt; {ok, Target} | Error</h3>
      <ul class="type_desc"><li><code>ChannelPid = pid()</code></li><li><code>Name = Target = string()</code></li><li><code>Timeout = timeout()</code></li><li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li></ul>
      
      <div class="description">
        <p>Reads the link target from the symbolic link specified by <code>name</code>.
	</p>
      </div>
    </div>

    <div class="function">
      <name since="" name="read_link_info" arity="2"/>
      <name since="" name="read_link_info" arity="3"/>
      
      <div class="description">
        <p>Returns a <code>file_info</code> record from the symbolic
          link specified by <code>Name</code> or <code>Handle</code>.
	  See
	  <a href="../kernel/file.html#read_link_info/2" class="seealso">file:read_link_info/2</a>
	  for information about the record.
	</p>
      </div>
    </div>

    <div class="function">
      <name since="" name="rename" arity="3"/>
      <name since="" name="rename" arity="4"/>
      
      <div class="description">
        <p>Renames a file named <code>OldName</code> and gives it the name
          <code>NewName</code>.
	</p>
      </div>
    </div>

    <div class="function">
      <name since="">start_channel(ConnectionRef) -&gt;</name>
      <name since="">start_channel(ConnectionRef, SftpOptions) -&gt;
      {ok, ChannelPid} | Error</name>

      <name since="">start_channel(Host) -&gt;</name>
      <name since="">start_channel(Host, Options) -&gt;</name>
      <name since="">start_channel(Host, Port, Options) -&gt;</name>
      <name since="">start_channel(TcpSocket) -&gt;</name>
      <name since="">start_channel(TcpSocket, Options) -&gt;
      {ok, ChannelPid, ConnectionRef} | Error</name>

      
      <ul class="type">
        <li><code>Host = <a href="../ssh/ssh.html#type-host" class="seealso">ssh:host()</a></code></li>
        <li><code>Port = <a href="../kernel/inet.html#type-port_number" class="seealso">inet:port_number()</a></code></li>
	<li><code>TcpSocket = <a href="../ssh/ssh.html#type-open_socket" class="seealso">ssh:open_socket()</a></code></li>
	<li><code>Options = [  <a href="#type-sftp_option" class="seealso">sftp_option()</a>
		      | <a href="../ssh/ssh.html#type-client_option" class="seealso">ssh:client_option()</a> ]</code></li>
	<li><code>SftpOptions = [  <a href="#type-sftp_option" class="seealso">sftp_option()</a> ]</code></li>
	<li><code>ChannelPid = pid()</code></li>
        <li><code>ConnectionRef = <a href="../ssh/ssh.html#type-connection_ref" class="seealso">ssh:connection_ref()</a></code></li>
	<li><code>Error = {error, <a href="#type-reason" class="seealso">reason()</a>}</code></li>
      </ul>
      <div class="description">
	<p>If no connection reference is provided, a connection is set
	up, and the new connection is returned. An SSH channel process
	is started to handle the communication with the SFTP server.
	The returned <code>pid</code> for this process is to be used as input to
	all other API functions in this module.</p>

	<p>Options:</p>
	<taglist>
          <dt><code>{timeout, timeout()}</code></dt>
	  <item>
	    <p>There are two ways to set a timeout for the underlying ssh connection:</p>
	    <list>
	      <item>If the connection timeout option <code>connect_timeout</code> is set, that value
	      is used also for the negotiation timeout and this option (<code>timeout</code>) is ignored.</item>
	      <item>Otherwise, this option (<code>timeout</code>) is used as the negotiation timeout
	      only and there is no connection timeout set</item>
	    </list>
	    <p>The value defaults to <code>infinity</code>.</p>
	  </item>
	  <dt>
	    <code>{sftp_vsn, integer()}</code>
	  </dt>
	  <item>
	    <p>
	      Desired SFTP protocol version.
	      The actual version is the minimum of
	      the desired version and the maximum supported
	      versions by the SFTP server.
	    </p>
	  </item>
	</taglist>
	<p>All other options are directly passed to
	<a href="ssh.html" class="seealso">ssh:connect/3</a> or ignored if a
	connection is already provided.</p>
      </div>
    </div>

     <div class="function">
      <name since="" name="stop_channel" arity="1"/>
      
      <div class="description">
	<p>Stops an SFTP channel. Does not close the SSH connection.
	Use <a href="ssh.html#close/1" class="seealso">ssh:close/1</a> to close it.</p>
      </div>
    </div>

    <div class="function">
      <name since="" name="write" arity="3"/>
      <name since="" name="write" arity="4"/>
      
      <div class="description">
        <p>Writes <code>data</code> to the file referenced by <code>Handle</code>.
	The file is to be opened with <code>write</code> or <code>append</code>
	flag. Returns <code>ok</code> if successful or <code>{error, reason()}</code>
	otherwise.</p>
      </div>
    </div>
    
    <div class="function">
      <name since="" name="write_file" arity="3"/>
      <name since="" name="write_file" arity="4"/>
      
      <div class="description">
        <p>Writes a file to the server.	The file is created if it does not exist
	but overwritten if it exists.</p>
      </div>
    </div>
    
    <div class="function">
      <name since="" name="write_file_info" arity="3"/>
      <name since="" name="write_file_info" arity="4"/>
      
      <div class="description">
        <p>Writes file information from a <code>file_info</code> record to the
	file specified by <code>Name</code>. See
	<a href="../kernel/file.html#write_file_info/2" class="seealso">file:write_file_info/[2,3]</a>
	for information about the record.
	</p>
      </div>
    </div>
  </div>
  

      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="../erldocs.js"></script>
  </body>
</html>
