<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="latin1" />
    <title>timer (stdlib) -  - erldocs.com (Erlang Documentation)</title>
    <link rel="search" type="application/opensearchdescription+xml"
          title="erldocs" href="/search.xml">
    <link type="text/css" rel="stylesheet" href="../erldocs.css" />
  </head>
  <body>

    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off"
             placeholder="press TAB to search" />
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        
  
  <h1>timer</h1>
  <h2 class="modsummary">Timer Functions</h2>
  <div class="description">
    <p>This module provides useful functions related to time. Unless otherwise
      stated, time is always measured in <code>milliseconds</code>.  All
      timer functions return immediately, regardless of work carried
      out by another process. 
      </p>
    <p>Successful evaluations of the timer functions yield return values
      containing a timer reference, denoted <code>TRef</code> below. By using 
      <code>cancel/1</code>, the returned reference can be used to cancel any
      requested action. A <code>TRef</code> is an Erlang term, the contents
      of which must not be altered.
      </p>
    <p>The timeouts are not exact, but should be <code>at least</code> as long
      as requested.
      </p>
  </div>
  <datatypes>
    <datatype>
      <name name="time" />
      <div class="description"><p>Time in milliseconds.</p></div>
    </datatype>
    <datatype>
      <name name="tref" />
      <div class="description"><p>A timer reference.</p></div>
    </datatype>
  </datatypes>
  <div class="functions"><h4>Functions</h4><hr  />
    <div class="function">
      <h3 id="start/0">start() -&gt; ok</h3>
      
      <div class="description">
        <p>Starts the timer server. Normally, the server does not need
          to be started explicitly. It is started dynamically if it
          is needed. This is useful during development, but in a
          target system the server should be started explicitly.  Use
          configuration parameters for <code>kernel</code> for this.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="apply_after/4">apply_after/4</h3>
      
      <div class="description">
        <p>Evaluates <code>apply(<anno>Module</anno>, <anno>Function</anno>, <anno>Arguments</anno>)</code> after <code><anno>Time</anno></code> amount of time
          has elapsed. Returns <code>{ok, <anno>TRef</anno>}</code>, or <code>{error, <anno>Reason</anno>}</code>.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="send_after/2">send_after(Time, Message) -&gt; {ok, TRef} | {error, Reason}</h3>
      <h3 id="send_after/3">send_after(Time, Pid, Message) -&gt; {ok, TRef} | {error, Reason}</h3>
      
      <div class="description">
        <p>
        <taglist>
          <dt><code>send_after/3</code></dt>
          <item>
            <p>Evaluates <code><anno>Pid</anno> ! <anno>Message</anno></code> after <code><anno>Time</anno></code> amount
              of time has elapsed. (<code><anno>Pid</anno></code> can also be an atom of a
              registered name.) Returns <code>{ok, <anno>TRef</anno>}</code>, or
              <code>{error, <anno>Reason</anno>}</code>.</p>
          </item>
          <dt><code>send_after/2</code></dt>
          <item>
            <p>Same as <code>send_after(<anno>Time</anno>, self(), <anno>Message</anno>)</code>.</p>
          </item>
        </taglist>
        </p>
      </div>
    </div>
    <div class="function">
      <h3 id="kill_after/1">kill_after(Time) -&gt; {ok, TRef} | {error, Reason2}</h3>
      <h3 id="kill_after/2">kill_after(Time, Pid) -&gt; {ok, TRef} | {error, Reason2}</h3>
      <h3 id="exit_after/2">exit_after(Time, Reason1) -&gt; {ok, TRef} | {error, Reason2}</h3>
      <h3 id="exit_after/3">exit_after(Time, Pid, Reason1) -&gt; {ok, TRef} | {error, Reason2}</h3>
      
      <div class="description">
        <p>
        <taglist>
          <dt><code>exit_after/3</code></dt>
          <item>
            <p>Send an exit signal with reason <code><anno>Reason1</anno></code> to Pid
              <code><anno>Pid</anno></code>. Returns <code>{ok, <anno>TRef</anno>}</code>, or
              <code>{error, <anno>Reason2</anno>}</code>.</p>
          </item>
          <dt><code>exit_after/2</code></dt>
          <item>
            <p>Same as <code>exit_after(<anno>Time</anno>, self(), <anno>Reason1</anno>)</code>.     </p>
          </item>
          <dt><code>kill_after/2</code></dt>
          <item>
            <p>Same as <code>exit_after(<anno>Time</anno>, <anno>Pid</anno>, kill)</code>.     </p>
          </item>
          <dt><code>kill_after/1</code></dt>
          <item>
            <p>Same as <code>exit_after(<anno>Time</anno>, self(), kill)</code>.     </p>
          </item>
        </taglist>
        </p>
      </div>
    </div>
    <div class="function">
      <h3 id="apply_interval/4">apply_interval/4</h3>
      
      <div class="description">
        <p>Evaluates <code>apply(<anno>Module</anno>, <anno>Function</anno>, <anno>Arguments</anno>)</code> repeatedly at
          intervals of  <code><anno>Time</anno></code>. Returns <code>{ok, <anno>TRef</anno>}</code>, or
          <code>{error, <anno>Reason</anno>}</code>.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="send_interval/2">send_interval(Time, Message) -&gt; {ok, TRef} | {error, Reason}</h3>
      <h3 id="send_interval/3">send_interval(Time, Pid, Message) -&gt; {ok, TRef} | {error, Reason}</h3>
      
      <div class="description">
        <p>
        <taglist>
          <dt><code>send_interval/3</code></dt>
          <item>
            <p>Evaluates <code><anno>Pid</anno> ! <anno>Message</anno></code> repeatedly after <code><anno>Time</anno></code>
              amount of time has elapsed. (<code><anno>Pid</anno></code> can also be an atom of
              a registered name.) Returns <code>{ok, <anno>TRef</anno>}</code> or
              <code>{error, <anno>Reason</anno>}</code>.</p>
          </item>
          <dt><code>send_interval/2</code></dt>
          <item>
            <p>Same as <code>send_interval(<anno>Time</anno>, self(), <anno>Message</anno>)</code>.</p>
          </item>
        </taglist>
        </p>
      </div>
    </div>
    <div class="function">
      <h3 id="cancel/1">cancel(TRef) -&gt; {ok, cancel} | {error, Reason}</h3>
      
      <div class="description">
        <p>Cancels a previously requested timeout. <code><anno>TRef</anno></code> is a unique
          timer reference returned by the timer function in question. Returns
          <code>{ok, cancel}</code>, or <code>{error, <anno>Reason</anno>}</code> when <code><anno>TRef</anno></code>
          is not a timer reference.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="sleep/1">sleep(Time) -&gt; ok</h3>
      
      <div class="description">
        <p>Suspends the process calling this function for <code><anno>Time</anno></code> amount
          of milliseconds and then returns <code>ok</code>, or suspend the process
	  forever if <code><anno>Time</anno></code> is the atom <code>infinity</code>. Naturally, this
          function does <em>not</em> return immediately.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="tc/1">tc(Fun) -&gt; {Time, Value}</h3>
      <h3 id="tc/2">tc(Fun, Arguments) -&gt; {Time, Value}</h3>
      <h3 id="tc/3">tc(Module, Function, Arguments) -&gt; {Time, Value}</h3>
      
      <div class="type_desc"><code>Time = In microseconds</code></div>
      <div class="description">
        <p>
        <taglist>
          <dt><code>tc/3</code></dt>
          <item>
            <p>Evaluates <code>apply(<anno>Module</anno>, <anno>Function</anno>, <anno>Arguments</anno>)</code> and measures
              the elapsed real time as reported by <code>os:timestamp/0</code>.
              Returns <code>{<anno>Time</anno>, <anno>Value</anno>}</code>, where
              <code><anno>Time</anno></code> is the elapsed real time in <em>microseconds</em>,
              and <code><anno>Value</anno></code> is what is returned from the apply.</p>
          </item>
          <dt><code>tc/2</code></dt>
          <item>
            <p>Evaluates <code>apply(<anno>Fun</anno>, <anno>Arguments</anno>)</code>. Otherwise works
            like <code>tc/3</code>.</p>
          </item>
          <dt><code>tc/1</code></dt>
          <item>
            <p>Evaluates <code><anno>Fun</anno>()</code>. Otherwise works like <code>tc/2</code>.</p>
          </item>

        </taglist>
        </p>
      </div>
    </div>
    <div class="function">
      <h3 id="now_diff/2">now_diff(T2, T1) -&gt; Tdiff</h3>
      
      <div class="type_desc"><code>Tdiff = In microseconds</code></div>
      <div class="description">
        <p>Calculates the time difference <code><anno>Tdiff</anno> = <anno>T2</anno> - <anno>T1</anno></code> in
          <em>microseconds</em>, where <code><anno>T1</anno></code> and <code><anno>T2</anno></code> probably
          are timestamp tuples returned from <code>erlang:now/0</code>.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="seconds/1">seconds(Seconds) -&gt; MilliSeconds</h3>
      
      <div class="description">
        <p>Returns the number of milliseconds in <code><anno>Seconds</anno></code>.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="minutes/1">minutes(Minutes) -&gt; MilliSeconds</h3>
      
      <div class="description">
        <p>Return the number of milliseconds in <code><anno>Minutes</anno></code>.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="hours/1">hours(Hours) -&gt; MilliSeconds</h3>
      
      <div class="description">
        <p>Returns the number of milliseconds in <code><anno>Hours</anno></code>.</p>
      </div>
    </div>
    <div class="function">
      <h3 id="hms/3">hms(Hours, Minutes, Seconds) -&gt; MilliSeconds</h3>
      
      <div class="description">
        <p>Returns the number of milliseconds in <code><anno>Hours</anno> + <anno>Minutes</anno> + <anno>Seconds</anno></code>.</p>
      </div>
    </div>
  </div>

  <div class="section">
    <h4>Examples</h4>
    <p>This example illustrates  how to print out "Hello World!" in 5 seconds:</p>
    <pre class="sh_erlang">
      1&gt; <code>timer:apply_after(5000, io, format, ["~nHello World!~n", []]).</code>
      {ok,TRef}
      Hello World!</pre>
    <p>The following coding example illustrates a process which performs a 
      certain action and if this action is not completed within a certain 
      limit, then the process is killed.</p>
    <pre class="sh_erlang">
      Pid = spawn(mod, fun, [foo, bar]),
      %% If pid is not finished in 10 seconds, kill him
      {ok, R} = timer:kill_after(timer:seconds(10), Pid),
      ...
      %% We change our mind...
      timer:cancel(R),
      ...</pre>
  </div>

  <div class="section">
    <h4>WARNING</h4>
    <p>A timer can always be removed by calling <code>cancel/1</code>.
      </p>
    <p>An interval timer, i.e. a timer created by evaluating any of the 
      functions <code>apply_interval/4</code>, <code>send_interval/3</code>, and 
      <code>send_interval/2</code>, is linked to the process towards which
      the timer performs its task.
      </p>
    <p>A one-shot timer, i.e. a timer created by evaluating any of the
      functions <code>apply_after/4</code>, <code>send_after/3</code>, 
      <code>send_after/2</code>, <code>exit_after/3</code>, <code>exit_after/2</code>, 
      <code>kill_after/2</code>, and <code>kill_after/1</code> is not linked to any
      process. Hence, such a timer is removed only when it reaches its 
      timeout, or if it is explicitly removed by a call to <code>cancel/1</code>.</p>
  </div>

      </div>
      <div id="funwrapper">
        <a id="viewfuns">View Functions</a>
        <ul id="funs"><li><a href="#start">start</a></li><li><a href="#apply_after">apply_after</a></li><li><a href="#send_after">send_after</a></li><li><a href="#send_after-1">send_after-1</a></li><li><a href="#kill_after">kill_after</a></li><li><a href="#kill_after-1">kill_after-1</a></li><li><a href="#exit_after">exit_after</a></li><li><a href="#exit_after-1">exit_after-1</a></li><li><a href="#apply_interval">apply_interval</a></li><li><a href="#send_interval">send_interval</a></li><li><a href="#send_interval-1">send_interval-1</a></li><li><a href="#cancel">cancel</a></li><li><a href="#sleep">sleep</a></li><li><a href="#tc">tc</a></li><li><a href="#tc-1">tc-1</a></li><li><a href="#tc-2">tc-2</a></li><li><a href="#now_diff">now_diff</a></li><li><a href="#seconds">seconds</a></li><li><a href="#minutes">minutes</a></li><li><a href="#hours">hours</a></li><li><a href="#hms">hms</a></li></ul>
      </div>
    </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="../erldocs.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-59760-14']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ?
          'https://ssl' : 'http://www') +
          '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
      })();
    </script>
  </body>
</html>

