<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="latin1" />
    <title>httpd_util (inets) -  - erldocs.com (Erlang Documentation)</title>
    <link rel="search" type="application/opensearchdescription+xml"
          title="erldocs" href="/search.xml">
    <link type="text/css" rel="stylesheet" href="../erldocs.css" />
  </head>
  <body>

    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off"
             placeholder="press TAB to search" />
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        
  
  <h1>httpd_util</h1>
  <h2 class="modsummary">Miscellaneous utility functions to be used when implementing Erlang Web server API modules.</h2>
  <div class="description">
    <p>This module provides the Erlang Web Server API module
      programmer with miscellaneous utility functions.</p>

    <span id="convert_request_date"> </span>
  </div>

  <div class="functions"><h4>Functions</h4><hr  />
    <div class="function">
      <h3 id="convert_request_date/1">convert_request_date(DateString) -&gt; ErlDate|bad_date</h3>
      
      <ul class="type">
        <li><code>DateString = string()</code></li>
        <li><code>ErlDate = {{Year,Month,Date},{Hour,Min,Sec}}</code></li>
        <li><code>Year = Month = Date = Hour = Min = Sec = integer()</code></li>
      </ul>
      <div class="description">
        <p><code>convert_request_date/1</code> converts <code>DateString</code> to 
          the Erlang date format. DateString must be in one of the three 
          date formats that is defined in the RFC 2616.</p>

	<span id="create_etag"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="create_etag/1">create_etag(FileInfo) -&gt; Etag</h3>
      
      <ul class="type">
        <li><code>FileInfo = file_info()</code></li>
        <li><code>Etag = string()</code></li>
      </ul>
      <div class="description">
        <p><code>create_etag/1</code> calculates the Etag for a file, from its
          size and time for last modification. fileinfo is a record defined 
          in <code>kernel/include/file.hrl</code></p>

	<span id="decode_hex"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="decode_hex/1">decode_hex(HexValue) -&gt; DecValue</h3>
      
      <ul class="type">
        <li><code>HexValue = DecValue = string()</code></li>
      </ul>
      <div class="description">
        <p>Converts the hexadecimal value <code>HexValue</code> into its
          decimal equivalent (<code>DecValue</code>).</p>

	<span id="day"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="day/1">day(NthDayOfWeek) -&gt; DayOfWeek</h3>
      
      <ul class="type">
        <li><code>NthDayOfWeek = 1-7</code></li>
        <li><code>DayOfWeek = string()</code></li>
      </ul>
      <div class="description">
        <span id="day"> </span>
        <p><code>day/1</code> converts the day of the week
          (<code>NthDayOfWeek</code>) as an integer (1-7) to an abbreviated
          string, that is: </p>
        <p>1 = "Mon", 2 = "Tue", ..., 7 = "Sat".</p>

	<span id="flatlength"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="flatlength/1">flatlength(NestedList) -&gt; Size</h3>
      
      <ul class="type">
        <li><code>NestedList = list()</code></li>
        <li><code>Size = integer()</code></li>
      </ul>
      <div class="description">
        <span id="flatlength"> </span>
        <p><code>flatlength/1</code> computes the size of the possibly nested
          list <code>NestedList</code>. Which may contain binaries.</p>

        <span id="hexlist_to_integer"> </span>
      </div>
    </div>

<div class="function">
      <h3 id="hexlist_to_integer/1">hexlist_to_integer(HexString) -&gt; Number</h3>
      
      <ul class="type">
        <li><code>Number = integer()</code></li>
        <li><code>HexString = string()</code></li>
      </ul>
      <div class="description">
        <p><code>hexlist_to_integer</code> Convert the Hexadecimal value of 
          HexString to an integer.</p>

	<span id="integer_to_hexlist"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="integer_to_hexlist/1">integer_to_hexlist(Number) -&gt; HexString</h3>
      
      <ul class="type">
        <li><code>Number = integer()</code></li>
        <li><code>HexString = string()</code></li>
      </ul>
      <div class="description">
        <span id="integer_to_hexlist"> </span>
        <p><code>integer_to_hexlist/1</code> Returns a string that represents 
          the Number in a Hexadecimal form.</p>

	<span id="lookup"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="lookup/2">lookup(ETSTable,Key) -&gt; Result</h3>
      <h3 id="lookup/3">lookup(ETSTable,Key,Undefined) -&gt; Result</h3>
      
      <ul class="type">
        <li><code>ETSTable = ets_table()</code></li>
        <li><code>Key = term()</code></li>
        <li><code>Result = term() | undefined | Undefined</code></li>
        <li><code>Undefined = term()</code></li>
      </ul>
      <div class="description">
        <p><code>lookup</code> extracts <code>{Key,Value}</code> tuples from
          <code>ETSTable</code> and returns the <code>Value</code> associated  
          with <code>Key</code>. If <code>ETSTable</code> is of type <code>bag</code>
          only the first <code>Value</code> associated with <code>Key</code> is
          returned. <code>lookup/2</code> returns <code>undefined</code> and
          <code>lookup/3</code> returns <code>Undefined</code> if no <code>Value</code>
          is found.</p>

	<span id="lookup_mime"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="lookup_mime/2">lookup_mime(ConfigDB,Suffix)</h3>
      <h3 id="lookup_mime/3">lookup_mime(ConfigDB,Suffix,Undefined) -&gt; MimeType</h3>
      
      <ul class="type">
        <li><code>ConfigDB = ets_table()</code></li>
        <li><code>Suffix = string()</code></li>
        <li><code>MimeType = string() | undefined | Undefined</code></li>
        <li><code>Undefined = term()</code></li>
      </ul>
      <div class="description">
        <span id="lookup_mime"> </span>
        <p><code>lookup_mime</code> returns the mime type associated with a
          specific file suffix as specified in the <code>mime.types</code>
          file (located in the 
          <path unix="$SERVER_ROOT/conf/mime.types" windows="%SERVER_ROOT%\conf\mime.types">config directory</path>).</p>

	<span id="lookup_mime_default"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="lookup_mime_default/2">lookup_mime_default(ConfigDB,Suffix)</h3>
      <h3 id="lookup_mime_default/3">lookup_mime_default(ConfigDB,Suffix,Undefined) -&gt; MimeType</h3>
      
      <ul class="type">
        <li><code>ConfigDB = ets_table()</code></li>
        <li><code>Suffix = string()</code></li>
        <li><code>MimeType = string() | undefined | Undefined</code></li>
        <li><code>Undefined = term()</code></li>
      </ul>
      <div class="description">
        <span id="lookup_mime_default"> </span>
        <p><code>lookup_mime_default</code> returns the mime type associated
          with a specific file suffix as specified in the
          <code>mime.types</code> file (located in the
          <path unix="$SERVER_ROOT/conf/mime.types" windows="%SERVER_ROOT%\conf\mime.types">config  directory</path>). 
          If no appropriate association can be found 
          the value of DefaultType is
          returned.</p>

	<span id="message"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="message/3">message(StatusCode,PhraseArgs,ConfigDB) -&gt; Message</h3>
      
      <ul class="type">
        <li><code>StatusCode = 301 | 400 | 403 | 404 | 500 | 501 | 504</code></li>
        <li><code>PhraseArgs = term()</code></li>
        <li><code>ConfigDB = ets_table</code></li>
        <li><code>Message = string()</code></li>
      </ul>
      <div class="description">
        <span id="message"> </span>
        <p><code>message/3</code> returns an informative HTTP 1.1 status
          string in HTML. Each <code>StatusCode</code> requires a specific
          <code>PhraseArgs</code>:
          </p>
        <taglist>
          <dt><code>301</code></dt>
          <item><code>string()</code>: A URL pointing at the new document
           position.</item>
          <dt><code>400 | 401 | 500</code></dt>
          <item><code>none</code> (No <code>PhraseArgs</code>)</item>
          <dt><code>403 | 404</code></dt>
          <item><code>string()</code>: A <code>Request-URI</code> as described in
           RFC 2616.</item>
          <dt><code>501</code></dt>
          <item><code>{Method,RequestURI,HTTPVersion}</code>: The HTTP
          <code>Method</code>, <code>Request-URI</code> and <code>HTTP-Version</code>
           as defined in RFC 2616.</item>
          <dt><code>504</code></dt>
          <item><code>string()</code>: A string describing why the service
           was unavailable.</item>
        </taglist>

	<span id="month"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="month/1">month(NthMonth) -&gt; Month</h3>
      
      <ul class="type">
        <li><code>NthMonth = 1-12</code></li>
        <li><code>Month = string()</code></li>
      </ul>
      <div class="description">
        <span id="month"> </span>
        <p><code>month/1</code> converts the month <code>NthMonth</code> as an
          integer (1-12) to an abbreviated string, that is: </p>
        <p>1 = "Jan", 2 = "Feb", ..., 12 = "Dec".</p>

	<span id="multi_lookup"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="multi_lookup/2">multi_lookup(ETSTable,Key) -&gt; Result</h3>
      
      <ul class="type">
        <li><code>ETSTable = ets_table()</code></li>
        <li><code>Key = term()</code></li>
        <li><code>Result = [term()]</code></li>
      </ul>
      <div class="description">
        <p><code>multi_lookup</code> extracts all <code>{Key,Value}</code> tuples
          from an <code>ETSTable</code> and returns <em>all</em><code>Values</code> associated with the <code>Key</code> in a list.</p>

	<span id="reason phrase"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="reason_phrase/1">reason_phrase(StatusCode) -&gt; Description</h3>
      
      <ul class="type">
        <li><code>StatusCode = 100|  200 | 201 | 202 | 204 | 205 | 206 |  300 | 301 | 302 | 303 | 304 |  400 | 401 | 402 | 403 | 404 | 405 | 406 | 410 411 | 412 | 413 | 414 415 | 416 | 417 |  500 | 501 | 502 | 503 | 504 | 505</code></li>
        <li><code>Description = string()</code></li>
      </ul>
      <div class="description">
        <p><code>reason_phrase</code> returns the <code>Description</code> of an
          HTTP 1.1 <code>StatusCode</code>, for example 200 is "OK" and 201
          is "Created". Read RFC 2616 for further information.</p>

	<span id="rfc1123_date"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="rfc1123_date/0">rfc1123_date() -&gt; RFC1123Date</h3>
      <h3 id="rfc1123_date/6">rfc1123_date({{YYYY,MM,DD},{Hour,Min,Sec}}}) -&gt; RFC1123Date</h3>
      
      <ul class="type">
        <li><code>YYYY = MM = DD = Hour = Min =Sec = integer()</code></li>
        <li><code>RFC1123Date = string()</code></li>
      </ul>
      <div class="description">
        <span id="rfc1123_date"> </span>
        <p><code>rfc1123_date/0</code> returns the current date in RFC 1123
          format. <code>rfc_date/1</code> converts the date in the Erlang format
          to the RFC 1123 date format.</p>

	<span id="split"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="split/3">split(String,RegExp,N) -&gt; SplitRes</h3>
      
      <ul class="type">
        <li><code>String = RegExp = string()</code></li>
        <li><code>SplitRes = {ok, FieldList} | {error, errordesc()}</code></li>
        <li><code>Fieldlist = [string()]</code></li>
        <li><code>N = integer</code></li>
      </ul>
      <div class="description">
        <span id="split"> </span>
        <p><code>split/3</code> splits the <code>String</code> in <code>N</code> chunks
          using the <code>RegExp</code>. <code>split/3</code> is is equivalent to
          <code>regexp:split/2</code> with one exception, that is <code>N</code>
          defines the number of maximum number of fields in the
          <code>FieldList</code>.</p>

	<span id="split_script_path"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="split_script_path/1">split_script_path(RequestLine) -&gt; Splitted</h3>
      
      <ul class="type">
        <li><code>RequestLine = string()</code></li>
        <li><code>Splitted = not_a_script | {Path, PathInfo, QueryString}</code></li>
        <li><code>Path = QueryString = PathInfo = string()</code></li>
      </ul>
      <div class="description">
        <span id="split_script_path"> </span>
        <p><code>split_script_path/1</code> is equivalent to
          <code>split_path/1</code> with one exception. If the longest
          possible path is not a regular, accessible and executable
          file <code>not_a_script</code> is returned.</p>

	<span id="split_path"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="split_path/1">split_path(RequestLine) -&gt; {Path,QueryStringOrPathInfo}</h3>
      
      <ul class="type">
        <li><code>RequestLine = Path = QueryStringOrPathInfo = string()</code></li>
      </ul>
      <div class="description">
        <span id="split_path"> </span>
        <p><code>split_path/1</code> splits the <code>RequestLine</code> in a file
          reference (<code>Path</code>) and a <code>QueryString</code> or a
          <code>PathInfo</code> string as specified in RFC 2616. A
          <code>QueryString</code> is isolated from the <code>Path</code> with a
          question mark (<code>?</code>) and <code>PathInfo</code> with a slash
          (/). In the case of a <code>QueryString</code>, everything before
          the <code>?</code> is a <code>Path</code> and everything after a
          <code>QueryString</code>. In the case of a <code>PathInfo</code> the
          <code>RequestLine</code> is scanned from left-to-right on the hunt
          for longest possible <code>Path</code> being a file or a
          directory. Everything after the longest possible
          <code>Path</code>, isolated with a <code>/</code>, is regarded as
          <code>PathInfo</code>. The resulting <code>Path</code> is decoded using
          <code>decode_hex/1</code> before delivery.</p>

	<span id="strip"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="strip/1">strip(String) -&gt; Stripped</h3>
      
      <ul class="type">
        <li><code>String = Stripped = string()</code></li>
      </ul>
      <div class="description">
        <span id="strip"> </span>
        <p><code>strip/1</code> removes any leading or trailing linear white
          space from the string.  Linear white space should be read as
          horizontal tab or space.</p>

	<span id="suffix"> </span>
      </div>
    </div>

    <div class="function">
      <h3 id="suffix/1">suffix(FileName) -&gt; Suffix</h3>
      
      <ul class="type">
        <li><code>FileName = Suffix = string()</code></li>
      </ul>
      <div class="description">
        <span id="suffix"> </span>
        <p><code>suffix/1</code> is equivalent to
          <code>filename:extension/1</code> with one exception, that is
          <code>Suffix</code> is returned without a leading dot (<code>.</code>). </p>
      </div>
    </div>
  </div>

  <div class="section">
    <span id="see_also"> </span>
    <h4>SEE ALSO</h4>
    <p><a href="httpd.html" class="seealso">httpd(3)</a></p>
  </div>
  

      </div>
      <div id="funwrapper">
        <a id="viewfuns">View Functions</a>
        <ul id="funs"><li><a href="#convert_request_date/1">convert_request_date/1</a></li><li><a href="#create_etag/1">create_etag/1</a></li><li><a href="#decode_hex/1">decode_hex/1</a></li><li><a href="#day/1">day/1</a></li><li><a href="#flatlength/1">flatlength/1</a></li><li><a href="#hexlist_to_integer/1">hexlist_to_integer/1</a></li><li><a href="#integer_to_hexlist/1">integer_to_hexlist/1</a></li><li><a href="#lookup/2">lookup/2</a></li><li><a href="#lookup/3">lookup/3</a></li><li><a href="#lookup_mime/2">lookup_mime/2</a></li><li><a href="#lookup_mime/3">lookup_mime/3</a></li><li><a href="#lookup_mime_default/2">lookup_mime_default/2</a></li><li><a href="#lookup_mime_default/3">lookup_mime_default/3</a></li><li><a href="#message/3">message/3</a></li><li><a href="#month/1">month/1</a></li><li><a href="#multi_lookup/2">multi_lookup/2</a></li><li><a href="#reason_phrase/1">reason_phrase/1</a></li><li><a href="#rfc1123_date/0">rfc1123_date/0</a></li><li><a href="#rfc1123_date/6">rfc1123_date/6</a></li><li><a href="#split/3">split/3</a></li><li><a href="#split_script_path/1">split_script_path/1</a></li><li><a href="#split_path/1">split_path/1</a></li><li><a href="#strip/1">strip/1</a></li><li><a href="#suffix/1">suffix/1</a></li></ul>
      </div>
    </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="../erldocs.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-59760-14']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ?
          'https://ssl' : 'http://www') +
          '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
      })();
    </script>
  </body>
</html>

