<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>httpd_util (inets) -  (Erlang Documentation)</title>
    <link href="../erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44246018-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        
  
  <h1>httpd_util</h1>
  <h2 class="modsummary">Miscellaneous utility functions to be used when implementing 
  Erlang web server API modules.</h2>
  <div class="description">
    <p>This module provides the Erlang web server API module
      programmer with miscellaneous utility functions.</p>

    <span id="convert_request_date"> </span>
  </div>

  <div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr/>
    <div class="function">
      <h3 id="convert_request_date/1">convert_request_date(DateString) -&gt; ErlDate|bad_date</h3>
      
      <ul class="type">
        <li><code>DateString = string()</code></li>
        <li><code>ErlDate = {{Year,Month,Date},{Hour,Min,Sec}}</code></li>
        <li><code>Year = Month = Date = Hour = Min = Sec = integer()</code></li>
      </ul>
      <div class="description">
        <p><code>convert_request_date/1</code> converts <code>DateString</code> to 
          the Erlang date format. <code>DateString</code> must be in one of the 
	  three date formats defined in 
	<url href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</url>.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="create_etag/1">create_etag(FileInfo) -&gt; Etag</h3>
      
      <ul class="type">
        <li><code>FileInfo = file_info()</code></li>
        <li><code>Etag = string()</code></li>
      </ul>
      <div class="description">
        <p><code>create_etag/1</code> calculates the Etag for a file from its
          size and time for last modification. <code>FileInfo</code> is a record defined 
          in <code>kernel/include/file.hrl</code>.</p>
      </div>
    </div>
    
    <div class="function">
      <h3 id="day/1">day(NthDayOfWeek) -&gt; DayOfWeek</h3>
      
      <ul class="type">
        <li><code>NthDayOfWeek = 1-7</code></li>
        <li><code>DayOfWeek = string()</code></li>
      </ul>
      <div class="description">
        <p><code>day/1</code> converts the day of the week
          (<code>NthDayOfWeek</code>) from an integer (1-7) to an abbreviated
          string, that is:</p>
        <p>1 = "Mon", 2 = "Tue", ..., 7 = "Sat".</p>
      </div>
    </div>

    <div class="function">
      <h3 id="decode_hex/1">decode_hex(HexValue) -&gt; DecValue</h3>
      
      <ul class="type">
        <li><code>HexValue = DecValue = string()</code></li>
      </ul>
      <div class="description">
        <p>Converts the hexadecimal value <code>HexValue</code> into its
          decimal equivalent (<code>DecValue</code>).</p>
      </div>
    </div>
    
    <div class="function">
      <h3 id="flatlength/1">flatlength(NestedList) -&gt; Size</h3>
      
      <ul class="type">
        <li><code>NestedList = list()</code></li>
        <li><code>Size = integer()</code></li>
      </ul>
      <div class="description">
        <p><code>flatlength/1</code> computes the size of the possibly nested
          list <code>NestedList</code>, which can contain binaries.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="hexlist_to_integer/1">hexlist_to_integer(HexString) -&gt; Number</h3>
      
      <ul class="type">
        <li><code>Number = integer()</code></li>
        <li><code>HexString = string()</code></li>
      </ul>
      <div class="description">
        <p><code>hexlist_to_integer</code> converts the hexadecimal value of 
          <code>HexString</code> to an integer.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="integer_to_hexlist/1">integer_to_hexlist(Number) -&gt; HexString</h3>
      
      <ul class="type">
        <li><code>Number = integer()</code></li>
        <li><code>HexString = string()</code></li>
      </ul>
      <div class="description">
        <p><code>integer_to_hexlist/1</code> returns a string representing
          <code>Number</code> in a hexadecimal form.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="lookup/2">lookup(ETSTable,Key) -&gt; Result</h3>
      <h3 id="lookup/3">lookup(ETSTable,Key,Undefined) -&gt; Result</h3>
      
      <ul class="type">
        <li><code>ETSTable = ets_table()</code></li>
        <li><code>Key = term()</code></li>
        <li><code>Result = term() | undefined | Undefined</code></li>
        <li><code>Undefined = term()</code></li>
      </ul>
      <div class="description">
        <p><code>lookup</code> extracts <code>{Key,Value}</code> tuples from
          <code>ETSTable</code> and returns the <code>Value</code> associated  
          with <code>Key</code>. If <code>ETSTable</code> is of type <code>bag</code>,
          only the first <code>Value</code> associated with <code>Key</code> is
          returned. <code>lookup/2</code> returns <code>undefined</code> and
          <code>lookup/3</code> returns <code>Undefined</code> if no <code>Value</code>
          is found.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="lookup_mime/2">lookup_mime(ConfigDB,Suffix)</h3>
      <h3 id="lookup_mime/3">lookup_mime(ConfigDB,Suffix,Undefined) -&gt; MimeType</h3>
      
      <ul class="type">
        <li><code>ConfigDB = ets_table()</code></li>
        <li><code>Suffix = string()</code></li>
        <li><code>MimeType = string() | undefined | Undefined</code></li>
        <li><code>Undefined = term()</code></li>
      </ul>
      <div class="description">
        <p><code>lookup_mime</code> returns the MIME type associated with a
          specific file suffix as specified in the file <code>mime.types</code>
          (located in the 
          <path unix="$SERVER_ROOT/conf/mime.types" windows="%SERVER_ROOT%\conf\mime.types">
	config directory</path>).</p>
      </div>
    </div>

    <div class="function">
      <h3 id="lookup_mime_default/2">lookup_mime_default(ConfigDB,Suffix)</h3>
      <h3 id="lookup_mime_default/3">lookup_mime_default(ConfigDB,Suffix,Undefined) -&gt; MimeType</h3>
      
      <ul class="type">
        <li><code>ConfigDB = ets_table()</code></li>
        <li><code>Suffix = string()</code></li>
        <li><code>MimeType = string() | undefined | Undefined</code></li>
        <li><code>Undefined = term()</code></li>
      </ul>
      <div class="description">
        <p><code>lookup_mime_default</code> returns the MIME type associated
          with a specific file suffix as specified in the
          <code>mime.types</code> file (located in the
          <path unix="$SERVER_ROOT/conf/mime.types" windows="%SERVER_ROOT%\conf\mime.types">
	    config  directory</path>). 
          If no appropriate association is found, the value of <code>DefaultType</code> is
          returned.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="message/3">message(StatusCode,PhraseArgs,ConfigDB) -&gt; Message</h3>
      
      <ul class="type">
        <li><code>StatusCode = 301 | 400 | 403 | 404 | 500 | 501 | 504</code></li>
        <li><code>PhraseArgs = term()</code></li>
        <li><code>ConfigDB = ets_table</code></li>
        <li><code>Message = string()</code></li>
      </ul>
      <div class="description">
        <p><code>message/3</code> returns an informative HTTP 1.1 status
          string in HTML. Each <code>StatusCode</code> requires a specific
          <code>PhraseArgs</code>:
          </p>
        <taglist>
          <dt><code>301</code></dt>
          <item><p><code>string()</code>: A URL pointing at the new document
           position.</p></item>
          <dt><code>400 | 401 | 500</code></dt>
          <item><p><code>none</code> (no <code>PhraseArgs</code>).</p></item>
          <dt><code>403 | 404</code></dt>
          <item><p><code>string()</code>: A <code>Request-URI</code> as described in
          <url href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</url>.</p>
	  </item>
          <dt><code>501</code></dt>
          <item><p><code>{Method,RequestURI,HTTPVersion}</code>: The HTTP
          <code>Method</code>, <code>Request-URI</code>, and <code>HTTP-Version</code>
           as defined in RFC 2616.</p></item>
          <dt><code>504</code></dt>
          <item><p><code>string()</code>: A string describing why the service
           was unavailable.</p></item>
        </taglist>
      </div>
    </div>

    <div class="function">
      <h3 id="month/1">month(NthMonth) -&gt; Month</h3>
      
      <ul class="type">
        <li><code>NthMonth = 1-12</code></li>
        <li><code>Month = string()</code></li>
      </ul>
      <div class="description">
        <p><code>month/1</code> converts the month <code>NthMonth</code> as an
          integer (1-12) to an abbreviated string, that is: </p>
        <p>1 = "Jan", 2 = "Feb", ..., 12 = "Dec".</p>
      </div>
    </div>

    <div class="function">
      <h3 id="multi_lookup/2">multi_lookup(ETSTable,Key) -&gt; Result</h3>
      
      <ul class="type">
        <li><code>ETSTable = ets_table()</code></li>
        <li><code>Key = term()</code></li>
        <li><code>Result = [term()]</code></li>
      </ul>
      <div class="description">
        <p><code>multi_lookup</code> extracts all <code>{Key,Value}</code> tuples
          from an <code>ETSTable</code> and returns <em>all</em> <code>Values</code> 
	associated with <code>Key</code> in a list.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="reason_phrase/1">reason_phrase(StatusCode) -&gt; Description</h3>
      
      <ul class="type">
        <li><code>StatusCode = 100| 200 | 201 | 202 | 204 | 205 | 206 | 300 | 301 | 302 | 303 | 304 | 400 | 401 | 402 | 403 | 404 | 405 | 406 | 410 411 | 412 | 413 | 414 415 | 416 | 417 | 500 | 501 | 502 | 503 | 504 | 505</code></li>
        <li><code>Description = string()</code></li>
      </ul>
      <div class="description">
        <p><code>reason_phrase</code> returns <code>Description</code> of an
          HTTP 1.1 <code>StatusCode</code>, for example, 200 is "OK" and 201
          is "Created". For more information, see
	<url href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</url>.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="rfc1123_date/0">rfc1123_date() -&gt; RFC1123Date</h3>
      <h3 id="rfc1123_date/6">rfc1123_date({{YYYY,MM,DD},{Hour,Min,Sec}}) -&gt; RFC1123Date</h3>
      
      <ul class="type">
        <li><code>YYYY = MM = DD = Hour = Min = Sec = integer()</code></li>
        <li><code>RFC1123Date = string()</code></li>
      </ul>
      <div class="description">
        <p><code>rfc1123_date/0</code> returns the current date in RFC 1123
          format. <code>rfc_date/1</code> converts the date in the Erlang format
          to the RFC 1123 date format.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="split/3">split(String,RegExp,N) -&gt; SplitRes</h3>
      
      <ul class="type">
        <li><code>String = RegExp = string()</code></li>
        <li><code>SplitRes = {ok, FieldList} | {error, errordesc()}</code></li>
        <li><code>Fieldlist = [string()]</code></li>
        <li><code>N = integer</code></li>
      </ul>
      <div class="description">
        <p><code>split/3</code> splits <code>String</code> in <code>N</code> chunks
          using <code>RegExp</code>. <code>split/3</code> is equivalent to
          <code>regexp:split/2</code> with the exception that <code>N</code>
          defines the maximum number of fields in
          <code>FieldList</code>.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="split_script_path/1">split_script_path(RequestLine) -&gt; Splitted</h3>
      
      <ul class="type">
        <li><code>RequestLine = string()</code></li>
        <li><code>Splitted = not_a_script | {Path, PathInfo, QueryString}</code></li>
        <li><code>Path = QueryString = PathInfo = string()</code></li>
      </ul>
      <div class="description">
        <p><code>split_script_path/1</code> is equivalent to
          <code>split_path/1</code> with one exception. If the longest
          possible path is not a regular, accessible, and executable
          file, then <code>not_a_script</code> is returned.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="split_path/1">split_path(RequestLine) -&gt; {Path,QueryStringOrPathInfo}</h3>
      
      <ul class="type">
        <li><code>RequestLine = Path = QueryStringOrPathInfo = string()</code></li>
      </ul>
      <div class="description">
        <p><code>split_path/1</code> splits <code>RequestLine</code> in a file
          reference (<code>Path</code>), and a <code>QueryString</code> or a
          <code>PathInfo</code> string as specified in
	  <url href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</url>.
	  A <code>QueryString</code> is isolated from <code>Path</code> with a
          question mark (<code>?</code>) and <code>PathInfo</code> with a slash
          (/). In the case of a <code>QueryString</code>, everything before
          <code>?</code> is a <code>Path</code> and everything after <code>?</code> is a
          <code>QueryString</code>. In the case of a <code>PathInfo</code>,
          <code>RequestLine</code> is scanned from left-to-right on the hunt
          for longest possible <code>Path</code> being a file or a
          directory. Everything after the longest possible
          <code>Path</code>, isolated with a <code>/</code>, is regarded as
          <code>PathInfo</code>. The resulting <code>Path</code> is decoded using
          <code>decode_hex/1</code> before delivery.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="strip/1">strip(String) -&gt; Stripped</h3>
      
      <ul class="type">
        <li><code>String = Stripped = string()</code></li>
      </ul>
      <div class="description">
        <p><code>strip/1</code> removes any leading or trailing linear white
          space from the string. Linear white space is to be read as
          horizontal tab or space.</p>
      </div>
    </div>

    <div class="function">
      <h3 id="suffix/1">suffix(FileName) -&gt; Suffix</h3>
      
      <ul class="type">
        <li><code>FileName = Suffix = string()</code></li>
      </ul>
      <div class="description">
        <p><code>suffix/1</code> is equivalent to
          <code>filename:extension/1</code> with the exception that
          <code>Suffix</code> is returned without a leading dot (<code>.</code>).</p>
      </div>
    </div>
  </div>

  <div class="section">
    <h4>SEE ALSO</h4>
    <p><a href="httpd.html" class="seealso">httpd(3)</a></p>
  </div>
  

      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="../erldocs.js"></script>
  </body>
</html>
